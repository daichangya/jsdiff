<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>jsdiff - JavaScript Text Diff Library | Myers Algorithm Implementation</title>
    <meta
        name="description"
        content="Validate, format, and compare JSON documents easily. See object-level differences (no more missed changes from new lines or reordered properties) — even for large files."
    />
    <meta name="keywords"
          content="JSON diff, JavaScript diff, online code compare, JSON compare, code highlighter, JSON merge, JS diff tool">

    <meta name="baidu-site-verification" content="codeva-J44mWjyOTw" />

    <meta property="og:type" content="website" />
    <meta property="og:title" content="jsdiff - JavaScript Text Diff Library | Myers Algorithm Implementation" />
    <meta
            property="og:description"
            content="High-performance JavaScript library for text comparison. Supports character/word-level diffs, Node.js/browser compatibility, and custom algorithms. Try the live demo."
    />
    <meta property="og:locale" content="en_US" />
    <meta property="og:url" content="https://jsdiff.com/" />

    <script type="application/ld+json">
        {
            "@type": "SoftwareApplication",
            "name": "jsdiff",
            "description": "Validate, format, and compare two JSON documents instantly. See object differences (not just new lines) with 10x faster processing.",
            "operatingSystem": "Windows, macOS, Linux",
            "applicationCategory": "Development",
            "downloadUrl": "https://www.npmjs.com/package/diff",
            "githubUrl": "https://github.com/kpdecker/jsdiff"
        }
    </script>
    <link rel="stylesheet" href="style.css"/>

    <!-- 中英文互相声明 -->
    <link rel="alternate" hreflang="en" href="https://jsdiff.com/" />
    <link rel="alternate" hreflang="zh" href="https://jsdiff.com/zh/" />
</head>
<body>
<!-- 首页顶部工具区域 -->
<section class="hero">
    <div id="settings">
        <div class="title-section">
            <h1>Jsdiff: JavaScript Text Difference Library</h1>
        </div>
        <div class="options-section">
            <label><input type="radio" name="diff_type" value="diffJson" checked> JSON</label>
            <label><input type="radio" name="diff_type" value="diffChars"> Chars</label>
            <label><input type="radio" name="diff_type" value="diffWords"> Words</label>
            <label><input type="radio" name="diff_type" value="diffLines"> Lines</label>
            <label><input type="radio" name="diff_type" value="diffPatch"> Patch</label>
        </div>
        <div class="links-section">
            <a href="https://github.com/kpdecker/jsdiff" class="source">GitHub</a>
            <a href="https://json.jsdiff.com/" class="source">JSON Diff Tool</a>
            <a href="https://tools.zthinker.com/" class="source">More Tools</a>
        </div>
    </div>

    <div class="container">
        <div class="panel">
            <textarea id="a" placeholder="Enter original text here">restaurant</textarea>
        </div>
        <div class="panel">
            <textarea id="b" placeholder="Enter modified text here">aura</textarea>
        </div>
        <div class="panel">
            <pre id="result"></pre>
        </div>
    </div>
</section>

<script src="diff.js"></script>
<script defer>
var a = document.getElementById('a');
var b = document.getElementById('b');
var result = document.getElementById('result');

function changed() {
    var fragment = document.createDocumentFragment();
    var diff;
    if (window.diffType === 'diffPatch') {
        // We contort the patch into a similar data structure to that returned by diffChars,
        // diffWords, etc so that the same rendering code below can work on both.
        var pastHunkHeader = false;
        diff = Diff.createTwoFilesPatch('a.txt', 'b.txt', a.value, b.value)
            .split('\n')
            .map(function(entry) {
                const result = {
                    value: entry + '\n',
                };
                if (entry.startsWith('@@')) {
                    result.chunkHeader = true;
                    pastHunkHeader = true;
                } else if (pastHunkHeader) {
                    if (entry.startsWith('-')) {
                        result.removed = true;
                    } else if (entry.startsWith('+')) {
                        result.added = true;
                    }
                }
                return result;
            });
    } else if (window.diffType === 'diffJson') {
        try {
            // Try to parse JSON input
            var oldObj = JSON.parse(a.value);
            var newObj = JSON.parse(b.value);
            diff = Diff.diffJson(oldObj, newObj);
        } catch (e) {
            // If parsing fails, treat as text
            diff = [{value: 'Invalid JSON input: ' + e.message, added: true}];
        }
    } else {
        diff = Diff[window.diffType](a.value, b.value);
    }

    for (var i=0; i < diff.length; i++) {
        if (diff[i].added && diff[i + 1] && diff[i + 1].removed) {
            var swap = diff[i];
            diff[i] = diff[i + 1];
            diff[i + 1] = swap;
        }

        var node;
        if (diff[i].removed) {
            node = document.createElement('del');
            node.appendChild(document.createTextNode(diff[i].value));
        } else if (diff[i].added) {
            node = document.createElement('ins');
            node.appendChild(document.createTextNode(diff[i].value));
        } else if (diff[i].chunkHeader) {
            node = document.createElement('span');
            node.setAttribute('class', 'chunk-header');
            node.appendChild(document.createTextNode(diff[i].value));
        } else {
            node = document.createTextNode(diff[i].value);
        }
        fragment.appendChild(node);
    }

    result.textContent = '';
    result.appendChild(fragment);
}

function setExampleText(diffType) {
    if (diffType === 'diffJson') {
        a.value = JSON.stringify({
            name: "Product A",
            price: 100,
            features: ["Durable", "Easy to use"],
            metadata: {
                created: "2023-01-15",
                rating: 4.5
            }
        }, null, 2);
        
        b.value = JSON.stringify({
            name: "Product A",
            price: 120,
            features: ["Durable", "Easy to use", "Lightweight"],
            metadata: {
                created: "2023-01-15",
                rating: 4.7,
                inStock: true
            }
        }, null, 2);
    } else if (diffType === 'diffPatch') {
        a.value = "Line 1\nLine 2\nLine 3\nLine 4";
        b.value = "Line 1\nModified Line 2\nLine 3\nNew Line\nLine 4";
    } else if (diffType === 'diffLines') {
        a.value = "Line 1\nLine 2\nLine 3\nLine 4";
        b.value = "Line 1\nModified Line 2\nLine 3\nNew Line\nLine 4";
    } else if (diffType === 'diffWords') {
        a.value = "The quick brown fox jumps over the lazy dog";
        b.value = "The fast brown fox leaps over the lazy dog";
    } else {
        // diffChars and default
        a.value = "restaurant";
        b.value = "aura";
    }
}

window.onload = function() {
    var selectedDiffType = document.querySelector('#settings [name="diff_type"]:checked');
    onDiffTypeChange(selectedDiffType);
    setExampleText(selectedDiffType.value);
    changed();
};

a.onpaste = a.onchange =
b.onpaste = b.onchange = changed;

if ('oninput' in a) {
    a.oninput = b.oninput = changed;
} else {
    a.onkeyup = b.onkeyup = changed;
}

function onDiffTypeChange(radio) {
    window.diffType = radio.value;
    document.title = "Diff " + radio.value.slice(4);
}

var radio = document.getElementsByName('diff_type');
for (var i = 0; i < radio.length; i++) {
    radio[i].onchange = function(e) {
        onDiffTypeChange(e.target);
        setExampleText(e.target.value);
        changed();
    }
}
</script>

<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?4bdc02239b6fe6f4e90583308d9ed3cd";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>


<section class="seo-intro">
    <section>
        <h1>JSDiff - Online JSON / JavaScript Comparison Tool</h1>
        <p>
            JSDiff is a free online tool designed specifically for developers. It helps you quickly compare the differences between two segments of JSON or JavaScript code,
            supporting highlighted display, structured presentation, and one-click merging. It is suitable for scenarios such as front-end development, interface debugging, and configuration file comparison.
        </p>
    </section>

    <section>
        <h2>Feature Highlights</h2>
        <ul>
            <li>Supports structured comparison of JSON and JavaScript objects</li>
            <li>Highlights added, deleted, and modified parts</li>
            <li>Supports merging differences and exporting results</li>
            <li>Adapts to mobile devices, allowing code comparison anytime and anywhere</li>
            <li>Data is processed locally to ensure privacy and security</li>
        </ul>
    </section>

    <section>
        <h2>Usage Scenarios</h2>
        <p>Whether you are engaged in <strong>API debugging</strong>, <strong>configuration file comparison</strong>, or <strong>code review</strong>, JSDiff can help you quickly identify differences and improve work efficiency.</p>
    </section>

    <section>
        <h2>Technical Foundation</h2>
        <p>JSDiff is powered by the <strong>Myers Difference Algorithm</strong>, an efficient O(ND) algorithm for sequence comparison. This algorithm is widely used in version control systems like Git and text editors.</p>
        <p><a href="docs/myers-diff-algorithm.html">Learn more about Myers Difference Algorithm</a> - Discover how this powerful algorithm efficiently compares sequences and generates minimal edit scripts.</p>
    </section>
</section>
</body>
</html>
