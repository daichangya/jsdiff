<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>JSDiff - 在线 JSON/JavaScript 差异对比工具 | 高亮代码差异</title>
    <meta name="description" content="JSDiff 是一款免费的在线 JSON/JavaScript 对比工具，支持高亮显示差异、合并修改，帮助开发者快速比较代码或数据结构，适用于前端开发、接口调试和数据校验。">
    <meta name="keywords" content="JSON 对比, JavaScript Diff, 在线代码比较, JSON 差异, 代码高亮对比, JSON Merge, JS Diff, JSON Compare, JSON 格式化">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="canonical" href="https://jsdiff.com/">

    <!-- Open Graph (社交分享优化) -->
    <meta property="og:title" content="JSDiff - 在线 JSON/JavaScript 差异对比工具">
    <meta property="og:description" content="免费在线 JSON/JavaScript 差异比较工具，支持代码高亮、合并修改，适合开发者调试和数据对比。">
    <meta property="og:url" content="https://jsdiff.com/">
    <meta property="og:type" content="website">

    <!-- Schema.org 结构化数据 -->
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "SoftwareApplication",
            "name": "JSDiff",
            "operatingSystem": "Any",
            "applicationCategory": "DeveloperApplication",
            "description": "在线 JSON/JavaScript 对比工具，支持代码高亮、合并修改，适用于开发者调试。",
            "url": "https://jsdiff.com/",
            "offers": {
                "@type": "Offer",
                "price": "0",
                "priceCurrency": "USD"
            }
        }
    </script>

    <link rel="stylesheet" href="../style.css"/>
    <link rel="alternate" hreflang="en" href="https://jsdiff.com/" />
    <link rel="alternate" hreflang="zh" href="https://jsdiff.com/zh/" />

</head>
<body>
<section class="hero">
    <div id="settings">
        <div class="title-section">
            <h1>Jsdiff: JavaScript Text Difference Library</h1>
        </div>
        <div class="options-section">
            <label><input type="radio" name="diff_type" value="diffJson" checked> JSON</label>
            <label><input type="radio" name="diff_type" value="diffChars"> Chars</label>
            <label><input type="radio" name="diff_type" value="diffWords"> Words</label>
            <label><input type="radio" name="diff_type" value="diffLines"> Lines</label>
            <label><input type="radio" name="diff_type" value="diffPatch"> Patch</label>
        </div>
        <div class="links-section">
            <a href="https://github.com/kpdecker/jsdiff" class="source">GitHub</a>
            <a href="https://json.jsdiff.com/" class="source">JSON Diff Tool</a>
            <a href="https://tools.zthinker.com/" class="source">更多工具</a>
        </div>
    </div>

    <div class="container">
        <div class="panel">
            <textarea id="a" placeholder="Enter original text here">restaurant</textarea>
        </div>
        <div class="panel">
            <textarea id="b" placeholder="Enter modified text here">aura</textarea>
        </div>
        <div class="panel">
            <pre id="result"></pre>
        </div>
    </div>
 </section>

<script src="../diff.js"></script>
<script defer>
    var a = document.getElementById('a');
    var b = document.getElementById('b');
    var result = document.getElementById('result');

    function changed() {
        var fragment = document.createDocumentFragment();
        var diff;
        if (window.diffType === 'diffPatch') {
            // We contort the patch into a similar data structure to that returned by diffChars,
            // diffWords, etc so that the same rendering code below can work on both.
            var pastHunkHeader = false;
            diff = Diff.createTwoFilesPatch('a.txt', 'b.txt', a.value, b.value)
                .split('\n')
                .map(function(entry) {
                    const result = {
                        value: entry + '\n',
                    };
                    if (entry.startsWith('@@')) {
                        result.chunkHeader = true;
                        pastHunkHeader = true;
                    } else if (pastHunkHeader) {
                        if (entry.startsWith('-')) {
                            result.removed = true;
                        } else if (entry.startsWith('+')) {
                            result.added = true;
                        }
                    }
                    return result;
                });
        } else if (window.diffType === 'diffJson') {
            try {
                // Try to parse JSON input
                var oldObj = JSON.parse(a.value);
                var newObj = JSON.parse(b.value);
                diff = Diff.diffJson(oldObj, newObj);
            } catch (e) {
                // If parsing fails, treat as text
                diff = [{value: 'Invalid JSON input: ' + e.message, added: true}];
            }
        } else {
            diff = Diff[window.diffType](a.value, b.value);
        }

        for (var i=0; i < diff.length; i++) {
            if (diff[i].added && diff[i + 1] && diff[i + 1].removed) {
                var swap = diff[i];
                diff[i] = diff[i + 1];
                diff[i + 1] = swap;
            }

            var node;
            if (diff[i].removed) {
                node = document.createElement('del');
                node.appendChild(document.createTextNode(diff[i].value));
            } else if (diff[i].added) {
                node = document.createElement('ins');
                node.appendChild(document.createTextNode(diff[i].value));
            } else if (diff[i].chunkHeader) {
                node = document.createElement('span');
                node.setAttribute('class', 'chunk-header');
                node.appendChild(document.createTextNode(diff[i].value));
            } else {
                node = document.createTextNode(diff[i].value);
            }
            fragment.appendChild(node);
        }

        result.textContent = '';
        result.appendChild(fragment);
    }

    function setExampleText(diffType) {
        if (diffType === 'diffJson') {
            a.value = JSON.stringify({
                name: "Product A",
                price: 100,
                features: ["Durable", "Easy to use"],
                metadata: {
                    created: "2023-01-15",
                    rating: 4.5
                }
            }, null, 2);

            b.value = JSON.stringify({
                name: "Product A",
                price: 120,
                features: ["Durable", "Easy to use", "Lightweight"],
                metadata: {
                    created: "2023-01-15",
                    rating: 4.7,
                    inStock: true
                }
            }, null, 2);
        } else if (diffType === 'diffPatch') {
            a.value = "Line 1\nLine 2\nLine 3\nLine 4";
            b.value = "Line 1\nModified Line 2\nLine 3\nNew Line\nLine 4";
        } else if (diffType === 'diffLines') {
            a.value = "Line 1\nLine 2\nLine 3\nLine 4";
            b.value = "Line 1\nModified Line 2\nLine 3\nNew Line\nLine 4";
        } else if (diffType === 'diffWords') {
            a.value = "The quick brown fox jumps over the lazy dog";
            b.value = "The fast brown fox leaps over the lazy dog";
        } else {
            // diffChars and default
            a.value = "restaurant";
            b.value = "aura";
        }
    }

    window.onload = function() {
        var selectedDiffType = document.querySelector('#settings [name="diff_type"]:checked');
        onDiffTypeChange(selectedDiffType);
        setExampleText(selectedDiffType.value);
        changed();
    };

    a.onpaste = a.onchange =
        b.onpaste = b.onchange = changed;

    if ('oninput' in a) {
        a.oninput = b.oninput = changed;
    } else {
        a.onkeyup = b.onkeyup = changed;
    }

    function onDiffTypeChange(radio) {
        window.diffType = radio.value;
        document.title = "Diff " + radio.value.slice(4);
    }

    var radio = document.getElementsByName('diff_type');
    for (var i = 0; i < radio.length; i++) {
        radio[i].onchange = function(e) {
            onDiffTypeChange(e.target);
            setExampleText(e.target.value);
            changed();
        }
    }
</script>

<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?4bdc02239b6fe6f4e90583308d9ed3cd";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>


<section class="seo-intro">
    <section>
        <h1>JSDiff - 在线 JSON / JavaScript 对比工具</h1>
        <p>
            JSDiff 是一款专为开发者设计的免费在线工具，可帮助你快速比较两段 JSON 或 JavaScript 代码的差异，
            支持高亮显示、结构化展示以及一键合并，适合前端开发、接口调试、配置文件比对等场景。
        </p>
    </section>

    <section>
        <h2>功能特色</h2>
        <ul>
            <li>支持 JSON 与 JavaScript 对象的结构化对比</li>
            <li>高亮显示新增、删除、修改的部分</li>
            <li>支持合并差异并导出结果</li>
            <li>适配移动端，随时随地进行代码比较</li>
            <li>数据本地处理，保障隐私安全</li>
        </ul>
    </section>

    <section>
        <h2>使用场景</h2>
        <p>无论你是在 <strong>API 调试</strong>、<strong>配置文件比对</strong> 还是 <strong>代码审查</strong>，JSDiff 都能帮你快速找出差异，提高工作效率。</p>
    </section>

    <section>
        <h2>技术基础</h2>
        <p>JSDiff 采用 <strong>Myers 差异算法</strong>，这是一种高效的 O(ND) 序列比较算法。该算法广泛应用于 Git 等版本控制系统和文本编辑器中。</p>
        <p><a href="../docs/zh/myers-diff-algorithm.html">了解更多关于 Myers 差异算法的信息</a> - 探索这个强大算法如何高效比较序列并生成最小编辑脚本。</p>
    </section>
</section>

</body>
</html>
