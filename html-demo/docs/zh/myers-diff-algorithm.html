<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Myers 差异算法：高效比较序列的利器 | jsdiff</title>
    <meta
        name="description"
        content="深入了解 Myers 差异算法的工作原理、优势及应用场景。这个O(ND)算法如何高效地比较序列差异，为Git、文本编辑器等工具提供核心支持。"
    />
    <meta name="keywords"
          content="Myers算法, 差异算法, 序列比较, O(ND)算法, 文本比较, Git差异, 编辑距离">

    <meta property="og:type" content="article" />
    <meta property="og:title" content="Myers 差异算法：高效比较序列的利器" />
    <meta
            property="og:description"
            content="深入了解 Myers 差异算法的工作原理、优势及应用场景。这个O(ND)算法如何高效地比较序列差异，为Git、文本编辑器等工具提供核心支持。"
    />
    <meta property="og:locale" content="zh_CN" />
    <meta property="og:url" content="https://jsdiff.com/zh/docs/myers-diff-algorithm.html" />

    <link rel="stylesheet" href="../../style.css"/>
    <style>
        .article-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }

        .article-container h1 {
            font-size: 2em;
            margin-bottom: 0.8em;
            color: var(--primary-color);
        }

        .article-container h2 {
            font-size: 1.5em;
            margin-top: 1.5em;
            margin-bottom: 0.8em;
            color: var(--primary-color);
        }

        .article-container h3 {
            font-size: 1.2em;
            margin-top: 1.2em;
            margin-bottom: 0.6em;
        }

        .article-container p {
            margin-bottom: 1em;
        }

        .article-container ul, .article-container ol {
            margin-bottom: 1em;
            padding-left: 2em;
        }

        .article-container li {
            margin-bottom: 0.5em;
        }

        .article-container code {
            background-color: #f5f5f5;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: monospace;
        }

        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: var(--primary-color);
            text-decoration: none;
        }

        .back-link:hover {
            text-decoration: underline;
        }
    </style>

    <!-- 中英文互相声明 -->
    <link rel="alternate" hreflang="en" href="https://jsdiff.com/docs/myers-diff-algorithm.html" />
    <link rel="alternate" hreflang="zh" href="https://jsdiff.com/zh/docs/myers-diff-algorithm.html" />
</head>
<body>
<div id="settings">
    <div class="title-section">
        <h1>Myers 差异算法：高效比较序列的利器</h1>
    </div>
    <div class="links-section">
        <a href="../../zh/index.html" class="source">首页</a>
        <a href="https://github.com/kpdecker/jsdiff" class="source">GitHub</a>
        <a href="https://json.jsdiff.com/" class="source">JSON Diff Tool</a>
        <a href="https://tools.zthinker.com/" class="source">更多工具</a>
    </div>
</div>

<div class="article-container">
    <a href="../../zh/index.html" class="back-link">← 返回首页</a>

    <h1>Myers 差异算法：高效比较序列的利器</h1>

    <p>在日常工作与生活中，我们经常需要比较两个文本、文件或数据序列的差异，比如代码版本管理中的修改追踪、文档编辑中的变更对比等。1986年，计算机科学家Eugene W. Myers提出的O(ND)差异算法，为这类问题提供了高效解决方案。它不仅能快速找到两个序列的差异，还能生成最短的编辑脚本（即从一个序列转换为另一个序列所需的最少操作），如今已被广泛应用于Git、文本比较工具等场景。</p>

    <h2>算法核心思想：从"编辑图"看序列差异</h2>

    <p>Myers算法的核心是将序列比较问题转化为"编辑图"中的路径搜索问题，通过直观的几何模型简化复杂的差异计算。</p>

    <h3>编辑图的构建</h3>
    <p>假设有两个序列：</p>
    <ul>
        <li>序列A：<code>[a, b, c, d]</code>（长度为m）</li>
        <li>序列B：<code>[a, c, d, e]</code>（长度为n）</li>
    </ul>

    <p>我们可以构建一个(m+1)×(n+1)的网格（编辑图），横轴表示序列A的位置（从0到m），纵轴表示序列B的位置（从0到n）。网格中的每个点<code>(x, y)</code>代表"已处理完A的前x个元素和B的前y个元素"。</p>

    <p>从起点<code>(0, 0)</code>到终点<code>(m, n)</code>的路径，每一步都对应一种编辑操作：</p>
    <ul>
        <li>向右移动一步<code>(x+1, y)</code>：表示删除A中的元素（对应操作"DELETE"）</li>
        <li>向上移动一步<code>(x, y+1)</code>：表示插入B中的元素（对应操作"INSERT"）</li>
        <li>沿对角线移动一步<code>(x+1, y+1)</code>：表示A和B的当前元素相同，无需操作（对应"MATCH"）</li>
    </ul>

    <h3>最短路径 = 最少编辑操作</h3>
    <p>Myers算法的目标是找到从<code>(0, 0)</code>到<code>(m, n)</code>的<strong>最短路径</strong>，这条路径对应的编辑操作数量最少（即最小编辑距离）。其中，"距离"由非对角线步骤（插入/删除）的数量决定，对角线步骤（匹配）不增加距离。</p>

    <p>为了高效找到最短路径，算法引入了"k线"概念：<code>k = x - y</code>（x为横轴坐标，y为纵轴坐标）。每条k线代表一组满足<code>x - y = k</code>的点，而路径在k线上的移动，本质上是在平衡插入和删除操作的数量。</p>

    <h2>算法步骤：分层探索最短路径</h2>

    <p>Myers算法采用"分层探索"的方式，从距离d=0开始，逐步增加距离，直到抵达终点。每一层d代表"当前已使用d次插入/删除操作"，算法通过记录每层中能到达的最远位置，快速缩小搜索范围。</p>

    <p>具体步骤可简化为：</p>
    <ol>
        <li>初始化距离d=0，记录每条k线上能到达的最远x坐标（表示在该k线下，用d次操作能处理A的最多元素）。</li>
        <li>检查是否已抵达终点<code>(m, n)</code>，若是则停止。</li>
        <li>增加距离d，探索新的k线（k的范围为-d到+d，步长为2），计算每条k线上能到达的最远x坐标。</li>
        <li>重复步骤2-3，直到找到终点。</li>
    </ol>

    <h2>示例：直观感受算法的工作过程</h2>

    <p>下面通过一个具体例子，展示Myers算法如何比较两个短序列的差异。</p>

    <h3>示例序列</h3>
    <ul>
        <li>序列A：<code>ABCABBA</code>（长度7）</li>
        <li>序列B：<code>CBABAC</code>（长度6）</li>
    </ul>

    <p>我们希望找到从A到B的最短编辑脚本（插入I、删除D、匹配M）。</p>

    <h3>算法执行过程</h3>
    <ol>
        <li><strong>构建编辑图</strong>：横轴为A的位置（0-7），纵轴为B的位置（0-6），起点<code>(0,0)</code>，终点<code>(7,6)</code>。</li>
        <li><strong>分层探索路径</strong>：
            <ul>
                <li>d=0时，只能沿k=0线移动（x=y），最远到达<code>(0,0)</code>（未匹配任何元素）。</li>
                <li>d=1时，探索k=-1和k=1线，最远到达<code>(1,0)</code>（删除A的第一个元素"A"）或<code>(0,1)</code>（插入B的第一个元素"C"）。</li>
                <li>随着d增加，算法逐步推进，在d=4时，最终抵达终点<code>(7,6)</code>。</li>
            </ul>
        </li>
    </ol>

    <h3>生成的编辑脚本</h3>
    <p>通过回溯最短路径，得到从A到B的最少操作：</p>
    <ul>
        <li>D（删除A的第一个"A"）</li>
        <li>M（匹配"B"）</li>
        <li>M（匹配"C"）</li>
        <li>M（匹配"A"）</li>
        <li>M（匹配"B"）</li>
        <li>I（插入"C"，B中新增的元素）</li>
        <li>D（删除A的最后一个"A"）</li>
    </ul>

    <p>即编辑脚本为：<code>D, M, M, M, M, I, D</code>，共7步操作，其中4步为插入/删除（d=4），与算法计算的最小编辑距离一致。</p>

    <h2>算法优势与应用</h2>

    <p>Myers算法的最大优势是<strong>在序列差异较小时（即相似性高）效率极高</strong>，时间复杂度为O(ND)（N为两序列长度之和，D为最小编辑距离），远优于传统的动态规划算法（O(N²)）。这使得它在实际场景中表现出色，例如：</p>
    <ul>
        <li>版本控制系统（如Git）：用于比较代码文件的不同版本，生成差异补丁。</li>
        <li>文本编辑器（如VS Code）：实时显示两个文档的修改位置。</li>
        <li>数据同步工具：快速检测两个数据集的差异，实现增量同步。</li>
    </ul>

    <h2>总结</h2>

    <p>Myers的O(ND)差异算法通过将序列比较转化为编辑图中的最短路径搜索，以高效的分层探索策略，在处理相似序列时展现了优异的性能。它不仅是理论上的重要突破，更成为了工业界解决差异比较问题的标准工具，深刻影响着我们对文本、数据的管理与处理方式。无论是开发人员使用Git追踪代码变更，还是普通人用工具对比文档修改，背后都可能有Myers算法的默默支撑。</p>
</div>

<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?4bdc02239b6fe6f4e90583308d9ed3cd";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>
</body>
</html>